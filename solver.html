<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Math Solver</title>
</head>
<body>
<input id="question" type="text" placeholder="Enter question" style="width:300px">
<button onclick="solve()">Solve</button>
<span id="answer" style="font-size:1.5em; margin-left:10px;"></span>

<script>
function solve() {
    let q = document.getElementById('question').value.trim();

    // Remove trailing '=' or '?'
    q = q.replace(/[=?]/g, '').trim();

    // Normalize newlines and spaces
    q = q.replace(/\n+/g, ' ').trim();

    // Replace division symbols with '/'
    q = q.replace(/[÷:]/g, '/');

    // Replace multiplication symbols with '*'
    q = q.replace(/[x×]/gi, '*');

    // Remove any characters that aren't digits, operators, parentheses, or dot
    q = q.replace(/[^0-9+\-*/().\s]/g, '');

    let result;

    // Handle vertical fraction like "-6 -2"
    if (/^-?\d+(\.\d+)?\s-?\d+(\.\d+)?$/.test(q)) {
        let [top, bottom] = q.split(/\s+/);
        result = Number(top) / Number(bottom);
    } else {
        // Otherwise, evaluate inline arithmetic safely
        try {
            // Function constructor is safer than eval in this controlled scenario
            result = Function('"use strict"; return (' + q + ')')();
        } catch {
            result = "ERR";
        }
    }

    // Display the answer
    document.getElementById('answer').innerText = result;

    // Copy to clipboard
    navigator.clipboard.writeText(result.toString()).catch(err => {
        console.error('Could not copy:', err);
    });
}
</script>
</body>
</html>
